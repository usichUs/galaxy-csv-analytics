# Galaxy CSV Analytics

Аналитика CSV-файлов в браузере с историей, прогресс-баром и удобным UI.

---

## Быстрый старт

1. **Клонируйте репозиторий:**

   ```
   git clone https://github.com/usichUs/galaxy-csv-analytics.git
   cd galaxy-csv-analytics
   ```

2. **Установите зависимости:**

   ```
   npm install
   # или
   yarn install
   ```

3. **Запустите приложение:**

   ```bash
   npm run dev
   # или
   yarn run dev
   ```

4. **Откройте в браузере:**
   ```
   http://localhost:5173
   ```

---

## Возможности

- Загрузка и анализ CSV-файлов через drag&drop или выбор файла
- Прогресс-бар и статус загрузки
- История аналитики (сохраняется в localStorage)
- Просмотр подробной информации о каждом анализе в модальном окне
- Генерация отчётов

---

## Скрипты

- `npm start` — запуск приложения в режиме разработки
- `npm run build` — сборка production-версии
- `npm run lint` — проверка кода линтером
- `npm run test` — запуск тестов

---

## Структура проекта

```
src/
  api/             # Работа с сервером
  assets/          # Лого
  components/      # UI-компоненты
  Entities/        # Типы и интерфейсы
  layouts/         # Лейауты для приложения
  pages/           # Страницы приложения
  stores/          # Zustand-сторы
  utils/           # Утилиты

```

---

## Используемые пакеты

В проекте используются современные библиотеки и инструменты:

- **react** — основной UI-фреймворк
- **react-dom** — рендеринг React-компонентов
- **react-router-dom** — маршрутизация внутри приложения
- **zustand** — современное и простое управление состоянием
- **@iconify-icon/react** — иконки для интерфейса

Для разработки и сборки:

- **vite** — быстрый сборщик и dev-сервер
- **typescript** — строгая типизация
- **eslint** — линтер для поддержания качества кода
- **@vitejs/plugin-react** — интеграция React с Vite
- **@types/react**, **@types/react-dom** — типы для React
- **eslint-plugin-react-hooks**, **eslint-plugin-react-refresh** — плагины для ESLint

> Все зависимости и версии можно посмотреть в [package.json](./package.json)

---

## Тесты

В проекте реализованы тесты для проверки ключевых компонентов и утилит:

### Компоненты:

- **Uploader**:

  - Проверка начального состояния компонента.
  - Проверка корректной обработки загрузки файла.
  - Проверка отображения прогресса обработки файла.
  - Проверка отображения сообщения об ошибке при загрузке файла с недопустимым форматом.
  - Проверка сброса состояния при нажатии на кнопку отмены.

- **CSVGenerator**:

  - Проверка начального состояния компонента.
  - Проверка начала процесса генерации при нажатии на кнопку.
  - Проверка отображения сообщения об успешной генерации.
  - Проверка отображения сообщения об ошибке при сбое генерации.
  - Проверка отображения состояния загрузки во время генерации.
  - Проверка сброса состояния при нажатии на кнопку отмены.

- **HistoryList**:

  - Проверка отображения элементов истории.
  - Проверка открытия модального окна при клике на успешный элемент.
  - Проверка отсутствия модального окна при клике на элемент с ошибкой.
  - Проверка удаления элемента из истории.
  - Проверка очистки всей истории.

- **SubmitButton**:
  - Проверка текста кнопки.
  - Проверка состояния активности кнопки.
  - Проверка состояния отключения кнопки.

### Утилиты:

- **formatDate**:

  - Проверка корректного форматирования ISO-строки в формат `DD.MM.YYYY`.
  - Обработка некорректных данных.

- **formatHighlightValue**:

  - Форматирование значений в зависимости от ключа (`big_spent_at`, `less_spent_at`, и др.).
  - Обработка `undefined` и `null`.

- **formatNumber**:

  - Округление чисел и преобразование в строку.
  - Обработка нечисловых значений.

- **getDateByIndex**:

  - Преобразование индекса дня в строку с датой и названием месяца.
  - Обработка крайних случаев (например, выход за пределы года).

- **getStatusText**:
  - Возвращение текста статуса в зависимости от состояния (`error`, `isLoading`, `isSuccess`, `file`).

---

### Как запустить тесты

Для запуска тестов выполните команду:

```bash
npm run test
```
